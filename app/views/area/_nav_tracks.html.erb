<% if params[:action] =~ /new|create/ %>
<% area_title = 'New area (edit)' %>
<% else %>
<% area_title = @area.name + (params[:action] =~ /edit|update/ ? ' (edit)' : '') %>
<% end %>

<li><%= link_to @area.region.name, { :controller => 'region', :action => 'show', :id => @area.region.id }, :class => 'region' %></li>

<%= render :partial => 'shared/nav_current', :locals => { :nav_level => 'area', :current => area_title } %>

<% for track in @area.tracks %>
<li><%= link_to track.name, { :controller => 'track', :action => 'show', :id => track.id }, :class => 'track' %></li>
<% end %>

<% if params[:action] =~ /new|create/ %>
<% for area in @area.region.areas %>
  <li><%= link_to area.name, { :controller => 'area', :action => 'show', :id => area.id }, :class => 'area' %></li>
<% end %>
<% end %>